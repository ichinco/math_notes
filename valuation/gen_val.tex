\section{Introduction}

\noindent These notes cover basic theory of valuation in 
preparation for understanding cycle modules in \cite{Rost96}. The 
bulk of the content is obtained and re-organized from 
\cite{LangAlg} and \cite{MatsCA}, though the proofs are expanded,
for better or worse. 

\section{General Valuation Theory}

\begin{defn}
Let $G$ be a multiplicative abelian group. We say that an 
\emph{ordering} is defined in $G$ if we are given a 
multiplicatively closed subset $P$ not including $1$ such that 
$G$ is the disjoint union:
\[
P \dU P^{-1} \dU \{1\}.
\]
In this case, we call $P$ the \emph{positive elements} of $G$. Let 
$(G, P)$ denote a group with an ordering by $P$; at times, we 
simply write $G$ if the positive elements of the ordering is 
clear.
\end{defn}

For an ordering on $(G, P)$, we say that $g < h$ if $hg^{-1} \in 
P$. It is easy to see that $1 < h$ if and only if $h \in P$. The
following are clear consequences:

\begin{prop}
Let $(G, P)$ be a group with an ordering. Then:

\begin{enumerate}
\item For $g, h \in G$, either $g < h$, $g = h$, or $h < g$.

\item If $g < h$ then $gg' < hg'$ for any $g' \in G$.

\item $g < h$ and $h < k$ implies that $g < k$.
\end{enumerate}
\end{prop}

In fact, the above characteristics defines an ordering (though 
this will not be used in the sequel). More precisely:

\begin{prop}
Let $P$ be any subset of $G$. Define $h < g$ if $gh^{-1} 
\in P$. If ``$<$'' satisfies (1 - 3) of the above proposition, 
then $P$ defines an ordering of $G$.
\end{prop}
\begin{proof}
To show that $P$ is closed under multiplication, note that for
$g, h \in P$, $1 < g < gh$, and by (3), $1 < gh$, and therefore,
$gh \in P$. 

The fact that $G = P \dU P^{-1} \dU \{1\}$ is a consequence of
(1): fix $g \in G$, $g < 1, g = 1$ or $g > 1$ suggest precisely
that $P$ is disjoint from $P^{-1}$ and $\{1\}$, and $g \in P$,
$g = 1$ or $g \in P^{-1}$.
\end{proof}

\begin{rmk}
Suppose $(G, P)$ is any group with an ordering, then for any $g 
\in G$ such that $g^n = 1$ for any $n \in \Z$, then $g = 1$. 
Indeed, assume \WLOG that $g \in P$ to obtain a contradiction. 
Then $g^n \in P$ for any $n$; this contradicts the fact that $1 
\notin P$.

In particular, \emph{the map $g \mapsto g^n$ is injective}.
\end{rmk}

\begin{defn}
Write $\ext{G}$ for $G \dU \{\infty\}$, where $\infty$ is a 
formal symbol, and extend the order to $\ext{G}$ by requiring that 
$v(\infty) > v(x)$ for any $x \in G$.

Let $K$ be a field. A \emph{valuation} of $K$ is an association 
$v: K \to \ext{G}$ for some $(G, P)$ with an ordering:

\begin{enumerate}
\item[\textbf{V1.}] $v(x) = \infty$ if and only if $x = 0 \in K$,

\item[\textbf{V2.}] $v(xy) = v(x)v(y)$ for all $x, y \in K$,

\item[\textbf{V3.}] $v(x + y) \geq \min(v(x), v(y))$
\end{enumerate}

In this case, we say that $G$ is the \emph{value group} of the 
valuation $v$.
\end{defn}

\begin{rmk}\label{rmk_grp_morph}
It is easy to see that a valuation $v: K \to \ext{G}$
defines group homomorphism from $K^*$ to $G$. Noting \textbf{V2.},
we need only to verify that $v(1) = 1$. To see this, note that 
$v(1) = v(1 \cdot 1) = v(1)v(1)$. It follows that $v(1) = 
v(1)^{-1}v(1) = 1$ as desired. It follows, in particular, that
$v(x^{-1}) = v(x)^{-1}$.
\end{rmk}

We say that a valuation $v$ is \emph{trivial} if $v(K^*) = 1$.

\begin{prop}\label{prop_val_rng_are_local}
Let $K$ be a field, and $R$ is a subring of $K$ for which $x \in 
R$ or $x^{-1} \in R$. Then $R$ is a local domain.
\end{prop}
\begin{proof}
That $R$ is a domain follows from the fact that $R$ is a subring of
a field.

We show that the set $\ideal{m}$ of nonunits of $R$ is an ideal 
(hence maximal). It is clear that if $x \in R$ is not a unit, then
$rx$ is not a unit for any $r \in R$.

Suppose $x, y \in \ideal{m}$ are non-units, then assume \WLOG that 
$x/y \in R$ (or else $y/x \in R$). Then $1 + x/y \in R$. But
\[
1 + x/y = (x + y)/y.
\]
If $x + y$ is a unit, then $y$ is a unit, contradicting the 
assumption that $y \in \ideal{m}$. It follows that $\ideal{m}$
is an ideal. Maximality follows from the fact that any ideal
properly containing $\ideal{m}$ must in fact be unital, and 
uniqueness follows from the fact that any other maximal ideal must
be contained in $\ideal{m}$.
\end{proof}

\begin{defn}
Let $\phi: G \to G'$ be a group homomorphism between two groups 
with orderings $P$ and $P'$ respectively. We say that $\phi$ is
\emph{order preserving} if $\phi(P) \subset P'$.

Let $v: K \to \ext{G}$ and $w: K \to \ext{G'}$ be two valuations 
on $K$. We say that \emph{$v$ is equivalent to $w$} if there
exists an order preserving group homomorphism $\phi: G \to G'$
such that $\phi \comp v = w$ for all $x \in K^*$ and $v(0) = 
w(0)$.
\end{defn}

The following tie together valuations on $K$ and valuation rings
of $K$:

\begin{thm}\label{thm_valrng_eq_val}
There exists an one-to-one correspondence between equivalence 
classes of valuations on $K$ and valuation rings of $K$.
\end{thm}
\begin{proof}
We first construct the associations:

\pfitem{From valuation on $K$ to valuation rings}: Fix $v: K \to 
\ext{G}$ a valuation on $K$ with $(G, P)$ the associated group 
with ordering. Consider the subset $R = \{x \in K | v(x) \geq 
1\}$. 

By the \textbf{V2}. and the fact that $P$ is closed under 
multiplication, $R$ is closed under multiplication. Similarly,
if $x, y \in R$, then $v(x + y) \geq \min\{v(x), v(y)\} \geq 1.$
Then $x + y \in R$. Finally, $0 \in R$ since $v(0) = \infty > 
v(1) = 1$. It follows that $R$ is a ring.

To see that $R$ is a valuation ring of $K$, note that if $x 
\notin K$, then $v(x) < 1$. It follows that $v(x^{-1}) > 1$, and 
$x^{-1} \in R$.

Finally, to show that $R$ is independent of the choice of valuation,
notice that for any two equivalent valuations, the collection of
elements with valuation at least $1$ is precisely $R$.

\pfitem{From valuation rings to valuations on $K$}: Given $R$
a valuation ring, which is local by Prop. 
\ref{prop_val_rng_are_local}. Let $\ideal{m}$ denote the maximal
ideal, $U$ denote the set of units of $R$ and $\ideal{m}^{-1}$
the inverse in $K$ of the nonzero elements in $\ideal{m}$. 

If $x \notin R$, then $x \notin U$ and neither is $x^{-1}$. But 
$x^{-1} \in R$, so $x^{-1} \in \ideal{m}$. So $K = \ideal{m} \dU
U \dU \ideal{m}^{-1}$. It is clear that $U$ is a (normal) subgroup
of $K^*$. 

It is clear that the quotient $K^*/U$ is ordered by 
$\ideal{m}^{*}/U*$. Setting $\infty = 0$, we see that the map $K 
\to \ext{K^*/U}$ defines a valuation on $K$.

\pfitem{Equivalences}: To see that the associations are inverses, 
let $v: K \to \ext{G}$ be any valuation (with $P$ the ordering on 
$G$), and let $R$ be its associated valuation ring. We show that
$v$ is equivalent to the valuation defined by $R$, represented
by $v_R$.

As mentioned in the Remark \ref{rmk_grp_morph}, there exists a 
group homomorphism between $K^* \to G$. In particular, the 
kernel of this map consists precisely of the units of $R$, and we
have a homomorphism $\phi: K^*/U \to G$.

It is clear that $\ideal{m}^*/U = \phi^{-1}(P)$. Hence $\phi$ is
order preserving, and by construction, $\phi \comp v_R = v$, 
proving equivalence of $v$ and $v_R$.

To conclude, for a valuation ring $R$ of $K$, let $v_R$ be its
induced valuation and let $R'$ be the valuation ring associated to
$v_R$. We show that $R = R'$. This is clear, since by construction
$R' = \{x \in K | v_R(x) \geq 1\} = \{x | x \in R\} = R.$
\end{proof}

If $R$ is a valuation ring of $K$, then so is any subring $R'$ of 
$K$ that contains $K$. Here are some facts that follow from the 
setup we have discussed.

\begin{prop}\label{thm_mats_10_1}
Let $R, R'$ be valuation rings of $K$ with maximal ideals 
$\ideal{m}$ and $\ideal{m'}$ respectively. Suppose that $R 
\subsetneq R'$. Then

\begin{enumerate}
\item $\ideal{m'} \subsetneq \ideal{m}.$

\item $\ideal{m'}$ is a prime of $R$ and $R' = R_{\ideal{m'}}.$

\item $R/\ideal{m'}$ is a valuation ring of the residue field 
$R'/\ideal{m'}$.

\item $S$ is a subring of $R'$ whose image in $R'/\ideal{m'}$ is 
a valuation ring of $R'/\ideal{m'}$. Then $S$ has the same field
of fractions as $R'$.
\end{enumerate}
\end{prop}
\begin{proof}
For the following, let $\phi: R' \to R'/\ideal{m'}$ denote the
canonical projection map.

\pfbullet{(1)}: Fix $x \in \ideal{m'}$. Then $x^{-1} \notin R'$,
and not in $R$. Then $x \in R$, not as a unit. So $x \in 
\ideal{m}$. If $\ideal{m'} = \ideal{m}$, then $x \notin R$ implies
that $x^{-1} \in \ideal{m} = \ideal{m'}$, whence $R = R'$, which
contradicts the assumption that $R \subsetneq R'$.

\pfbullet{(2)}: By (1), we know that $\ideal{m'} \subset R$, and
since $R/\ideal{m'}$, which is a subring of the field 
$R'/\ideal{m'}$, which is a domain, $\ideal{m'}$ is prime of $R$.

Notice that $R - \ideal{m'}$ are units of $R'$. Then, 
$R_{\ideal{m'}} \subset R'$. To conclude, note that the maximal 
ideal of $R_{\ideal{m'}}$ is contained $\ideal{m'}$, whence equal 
to $\ideal{m'}$ by (1). It follows from (1) that $R' = 
R_{\ideal{m'}}$ as desired.

\pfbullet{(3)}: Fix $x \in R'/\ideal{m'}$. If $x \notin 
R/\ideal{m'}$ then $x$ is given by some $y \in R'$ such that $y 
\notin R$. Then $y^{-1} \in R$ and $x^{-1} = \phi(y)^{-1} = 
\phi(y^{-1}) \in R/\ideal{m'}$ as desired.

\pfbullet{(4)}: We show that $S$ is a valuation ring of $K$. That
is $S \cup S^{-1} = K$, where $S^{-1} = \{x^{-1} | x \in S^*\}$. 
Suppose $x \notin S$. There are two cases: either $x \in R'$ or 
not. Assume so. Then $x$ is a unit of $R$, so $x \notin 
\ideal{m'}$. Then $\phi(x) \neq 0$; since $x \notin S$, as 
$\phi(S)$ is a valuation ring of $R'/\ideal{m'}$ per assumption, 
$\phi(x)^{-1} = \phi(x^{-1}) \in \phi(S)$. It follows that 
$x^{-1} \in S$.

Now assume $x \notin R'$. Then $x^{-1} \in R'$, and in particular
$x^{-1} \in \ideal{m'}$. By (1), however, $\ideal{m'} \subset S$.
It follows that $x^{-1} \in S$, and (4) is proven.
\end{proof}
